<div *ngIf="!selectedProject" class="flex flex-col p-3">
  <!-- filter sidebar -->
  <div class="flex flex-row justify-start gap-10 mb-5">
    <div class="h-7 relative ">
      <div class="h-full hover:cursor-pointer">
        <h1 class="text-2xl font-bold" 
          [ngClass]="{
            'animate-pulse': dropdownState
          }"
        (click)="clickFilter()">filter by:</h1>
      </div>

      <div class="mt-3 ml-3 z-10 text-darkbrown bg-cream p-3 transition-all ease-linear" 
        [ngClass]="{
          'invisible opacity-0 ': !dropdownState,
          'visible opacity-1 ': dropdownState
        }" >
        <app-tags [tagFilter]="tagFilter" (newTagFilterEvent)="setTagFilter($event)"></app-tags>
        <app-categories [categoryFilter]="categoryFilter" (newCategoryFilterEvent)="setCategoryFilter($event)"></app-categories>
      </div>
    </div>

    <div class="flex flex-row text-2xl font-bold">
      <h1 *ngIf="categoryFilter">{{ categoryFilter.name }} 
        <i (click)="clearCategoryFilter()" class="fa-solid fa-trash hover:cursor-pointer"></i>
      </h1>
      <h1 *ngIf="tagFilter" class="ml-10">{{ tagFilter.name }}
        <i (click)="clearTagFilter()" class="fa-solid fa-trash hover:cursor-pointer"></i>
      </h1>
    </div>

  </div>

  <!-- projects list -->
  <div class="flex flex-row flex-wrap justify-center gap-3">
    <article *ngFor="let project of projects | projectFilter : tagFilter"
      [class.hidden]="categoryFilter && project.category?.id != categoryFilter.id"
      class="p-4 bg-darkbrown text-cream flex flex-col w-full md:w-[49%] h-[250px] md:h-[300px]">

      <section class="flex-grow">
        <h2 [routerLink]="['/projects', project.slug]" class="text-3xl font-bold mb-5 hover:cursor-pointer hover:scale-125 hover:ml-14 transition-all">{{ project.title | uppercase }}</h2>
        <div>{{ project.excerpt }}</div>
      </section>

      <footer class="mt-3">
        <div *ngIf="project.category" (click)="setCategoryFilter(project.category)">
          Category: <span class="hover:underline hover:cursor-pointer">{{ project.category.name }}</span>
        </div>
        <div *ngIf="project.tags?.length">
          Tags:
          <span *ngFor="let tag of project.tags" (click)="setTagFilter(tag)" class="hover:underline hover:cursor-pointer">
            {{ tag.name }}
          </span>
        </div>
      </footer>
    </article>
  </div>
</div>

<section *ngIf="selectedProject">
  <div (click)="clearSelectedProject()">Back</div>
  <app-project-detail></app-project-detail>
</section>